/*!
 * Remark (http://getbootstrapadmin.com/remark)
 * Copyright 2015 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */
!function(window,document,$){"use strict";$.site.menu={speed:250,accordion:!0,init:function(){this.$instance=$(".site-menu"),0!==this.$instance.length&&(this.bind(),"xs"!==Breakpoints.current().name&&this.scrollable.init())},globalClick:function(flag){switch(flag){case"on":$(document).on("click.site.menu",function(e){$('.dropdown > [data-dropdown-toggle="true"]').length>0&&0===$(e.target).closest(".dropdown-menu").length&&$('.dropdown > [data-dropdown-toggle="true"]').attr("data-dropdown-toggle","false").closest(".dropdown").removeClass("open")});break;case"off":$(document).off("click.site.menu")}},open:function($tag){$tag.is(".dropdown")&&($('[data-dropdown-toggle="true"]').attr("data-dropdown-toggle","false").closest(".dropdown").removeClass("open"),$tag.find(">.dropdown-toggle").attr("data-dropdown-toggle","true")),$tag.addClass("open")},close:function($tag){$tag.removeClass("open"),$tag.is(".dropdown")&&$tag.find(">.dropdown-toggle").attr("data-dropdown-toggle","false")},bind:function(){var self=this;"xs"!==Breakpoints.current().name&&self.globalClick("on"),this.$instance.on("open.site.menu",".site-menu-item",function(e){var $item=$(this);"xs"===Breakpoints.current().name?self.expand($item,function(){self.open($item)}):self.open($item),self.accordion&&$item.siblings(".open").trigger("close.site.menu"),e.stopPropagation()}).on("close.site.menu",".site-menu-item.open",function(e){var $item=$(this);"xs"===Breakpoints.current().name?self.collapse($item,function(){self.close($item)}):self.close($item),e.stopPropagation()}).on("click.site.menu",".site-menu-item",function(e){var $this=$(this);$this.is(".has-sub")&&$(e.target).closest(".site-menu-item").is(this)&&($this.is(".open")?$this.trigger("close.site.menu"):$this.trigger("open.site.menu")),"xs"===Breakpoints.current().name?e.stopPropagation():($this.is(".dropdown")&&e.stopPropagation(),1===$(e.target).closest(".site-menu-scroll-wrap").length&&(self.scrollable.update($(e.target).closest(".site-menu-scroll-wrap")),e.stopPropagation()))});var prevBreakpoint=Breakpoints.current().name;Breakpoints.on("change",function(){var current=Breakpoints.current().name;self.reset(),"xs"===current?(self.globalClick("off"),self.scrollable.destory(),self.$instance.off("click.site.menu.scroll")):"xs"===prevBreakpoint&&(self.scrollable.built||self.scrollable.init(),self.globalClick("off"),self.globalClick("on"),$(".site-menu .scrollable-container",self.$instance).css({height:"",width:""}),self.$instance.one("click.site.menu.scroll",".site-menu-item",function(){self.scrollable.refresh()})),prevBreakpoint=current})},reset:function(){$('.dropdown > [data-dropdown-toggle="true"]').attr("data-dropdown-toggle","false").closest(".dropdown").removeClass("open")},collapse:function($item,callback){var self=this,$sub=$($("> .site-menu-sub",$item)[0]||$("> .dropdown-menu",$item)[0]||$("> .site-menu-scroll-wrap",$item)[0]);$sub.show().slideUp(this.speed,function(){$(this).css("display",""),$(this).find("> .site-menu-item").removeClass("is-shown"),callback&&callback(),self.$instance.trigger("collapsed.site.menu")})},expand:function($item,callback){var self=this,$sub=$($("> .site-menu-sub",$item)[0]||$("> .dropdown-menu",$item)[0]||$("> .site-menu-scroll-wrap",$item)[0]),$children=$sub.is(".site-menu-sub")?$sub.children(".site-menu-item").addClass("is-hidden"):$($sub.find(".site-menu-sub")[0]).addClass("is-hidden");$sub.hide().slideDown(this.speed,function(){$(this).css("display",""),callback&&callback(),self.$instance.trigger("expanded.site.menu")}),setTimeout(function(){$children.addClass("is-shown"),$children.removeClass("is-hidden")},0)},refresh:function(){this.$instance.find(".open").filter(":not(.active)").removeClass("open")},scrollable:{built:!1,init:function(){var skin="scrollable-inverse";$.site.menubar.$instance&&$.site.menubar.$instance.is(".site-menubar-light")?skin="":$(".site-menubar").is(".site-menubar-light")&&(skin=""),$.each($(".site-menu-scroll-wrap",$.site.menu.$instance),function(i,list){$(list).asScrollable({namespace:"scrollable",skin:skin,direction:"vertical",contentSelector:">",containerSelector:">"}).data("asScrollable")}),this.built=!0},update:function($target){$target.data("asScrollable").update()},enable:function($target){$target.data("asScrollable").enable()},disable:function($target){$target.data("asScrollable").disable()},refresh:function(){var self=this;$.each($(".site-menu-scroll-wrap",this.$instance),function(i,list){self.enable($(list))})},destory:function(){var self=this;$.each($(".site-menu-scroll-wrap",this.$instance),function(i,list){self.disable($(list))})}}}}(window,document,jQuery);